// @ts-nocheck
class URLHandler{constructor(t=!1){this.debug=t,this.baseUrl=this.detectBaseUrl(),this.log(`Detected base URL: ${this.baseUrl}`),this.init()}log(t){this.debug&&console.log(`[URLHandler] ${t}`)}detectBaseUrl(){const t=window.location.hostname,e=window.location.pathname;if(this.log(`Detecting base URL for hostname: ${t}, pathname: ${e}`),"localhost"===t||"127.0.0.1"===t)return this.log("Detected local development environment"),"";const r=e.match(/^\/v\/([^\/]+)/);if(r){const t=`/v/${r[1]}`;return this.log(`Detected versioned deployment: ${t}`),t}if(e.startsWith("/latest/"))return this.log("Detected latest version deployment"),"/latest";const s=e.match(/^\/reports\/([^\/]+)/);if(s){const t=`/reports/${s[1]}`;return this.log(`Detected reports deployment: ${t}`),t}return this.log("Using default production (root) deployment"),""}adjustPath(t){return t.startsWith("/")?""===this.baseUrl||t.startsWith(this.baseUrl+"/")?t:this.baseUrl+t:t}fixPageUrls(){document.querySelectorAll('a[href^="/"]').forEach((t=>{const e=t.getAttribute("href"),r=this.adjustPath(e);e!==r&&(t.setAttribute("data-url-processed","true"),t.setAttribute("href",r))})),this.fixReactableUrls()}fixReactableUrls(){document.querySelectorAll('.reactable, [class*="reactable"]').forEach((t=>{t.querySelectorAll('a[href^="/"]').forEach((t=>{if(t.hasAttribute("data-url-processed"))return;const e=t.getAttribute("href"),r=this.adjustPath(e);e!==r&&(t.setAttribute("data-url-processed","true"),t.setAttribute("href",r))}))}))}init(){"loading"===document.readyState?document.addEventListener("DOMContentLoaded",(()=>this.fixPageUrls())):this.fixPageUrls(),document.addEventListener("click",(t=>{const e=t.target.closest('a[href^="/"]');if(e){if(e.classList.contains("dropdown-item"))return;const r=e.getAttribute("href"),s=this.adjustPath(r);this.log(`Click intercepted: ${r} -> ${s}`),r!==s&&(t.preventDefault(),this.log(`Redirecting to: ${s}`),"_blank"===e.target||t.ctrlKey||t.metaKey?window.open(s,"_blank"):window.location.href=s)}}));const t=new MutationObserver((t=>{let e=!1;t.forEach((t=>{"childList"===t.type&&t.addedNodes.length>0&&t.addedNodes.forEach((t=>{t.nodeType===Node.ELEMENT_NODE&&(t.matches('a[href^="/"]:not([data-url-processed])')||t.querySelector('a[href^="/"]:not([data-url-processed])'))&&(e=!0)}))})),e&&this.fixReactableUrls()})),e=()=>{document.querySelectorAll('.reactable, [class*="reactable"]').forEach((e=>{e.hasAttribute("data-url-observer")||(t.observe(e,{childList:!0,subtree:!0}),e.setAttribute("data-url-observer","true"))}))};e();new MutationObserver((()=>{e()})).observe(document.body,{childList:!0,subtree:!0})}}const urlParams=new URLSearchParams(window.location.search),isLocalhost="localhost"===window.location.hostname||"127.0.0.1"===window.location.hostname,debugMode="url"===urlParams.get("debug")||isLocalhost;new URLHandler(debugMode),window.adjustUrl=function(t){return new URLHandler(!1).adjustPath(t)};